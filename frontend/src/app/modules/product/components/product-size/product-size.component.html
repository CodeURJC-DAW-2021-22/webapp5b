<div class="product-column container">

    <div class="row">

        <!-- title -->
        <h1 class="softFont product-name">{{productSizes[0].name}}</h1>
    
        <hr>

        <!-- size availability -->
        <div class="row">
                
        </div>

        <!-- pick-size -->       
        <div class="pick-size row">
            <ng-template ngFor let-i="index" let-product [ngForOf]="productSizes">
                <div *ngIf="product.stock > 0; else exist" 
                    id="btn-size-{{product.size}}" 
                    class="product-size col-1 btn btn-outline-dark m-0"
                    [class.bg-dark]="i == selectedProduct"
                    [class.text-white]="i == selectedProduct"
                    (click)="selectSize(i)">
                    

                    {{product.size}}
                </div>
                <ng-template #exist>
                    <div type="button" class="col-1 btn btn-outline-secondary disabled m-0">
                        {{product.size}}
                    </div>
                </ng-template> 
            </ng-template>    
            <p *ngIf="isAmount">
                <ngb-alert [dismissible]="true" type='danger'>
                  <strong>Not enough stock</strong>
                </ngb-alert>
            </p>  
            <p *ngIf="isSelect">
                <ngb-alert [dismissible]="true" >
                  <strong>Select size</strong>
                </ngb-alert>
            </p> 
            <p *ngIf="isLessTwenty">
                <ngb-alert [dismissible]="false">
                  <strong>Low stock, only {{productSizes[selectedProduct!].stock}} units available</strong> <!---->
                </ngb-alert>
            </p>  
            <p *ngIf="isLessFive">
                <ngb-alert [dismissible]="false" type="danger">
                  <strong>Low stock, only {{productSizes[selectedProduct!].stock}} units available</strong> <!---->
                </ngb-alert>
            </p>                                              
        </div>

        <!-- product description -->
        <div class="row">
            <p class="product-description">{{productSizes[0].description}}</p>
        </div>

        <!-- interact with transaction -->
        <div class="form-group" *ngIf="isLogged(); else login">

            <div class="row">
                <!-- Button to add in wishlist -->
                <div id="fav-btn" class="col-1 btn btn-outline-dark p-1 mx-1"
                [class.bg-dark]="isPresent"
                [class.text-white]="isPresent"
                (click)="toogleWishlist()">
                    <fa-icon [icon]="faHeart" class="fa-2x"></fa-icon>
                </div>

                <!-- Button to add in cart -->
                <button id="cart-btn" class="col-8 btn btn-outline-dark text-uppercase fw-bolder" 
                    [disabled]="(quantity.invalid)" 
                    (click)="addToCart()">

                    <i class="bi-cart-fill"> Add to cart</i>
                </button>
                <p *ngIf="isAdded">
                    <ngb-alert #selfClosingAlert [dismissible]="false" type='success'>
                      <strong>Added to cart!</strong>
                    </ngb-alert>
                </p> 
                <p *ngIf="isAddedWish">
                    <ngb-alert [dismissible]="false" type='success'>
                      <strong>Added to wishlist!</strong>
                    </ngb-alert>
                </p> 
                <p *ngIf="isRemovedWish">
                    <ngb-alert [dismissible]="false" type='danger'>
                      <strong>Removed from wishlist!</strong>
                    </ngb-alert>
                </p> 

                <!-- input to set the amount -->
                <div class="col-2">
                    <input class="rounded w-100 h-100 border-dark text-center softFont fw-bold form-control"
                    #quantity="ngModel"
                    name="quantity"                       
                    type="number"
                    id="amount"
                    min="1"
                    [(ngModel)]="amount"
                    required>
                </div>
            </div>
            
            <!-- Alertas -->
            <div></div>
            
        </div>

        <ng-template #login>
            <div class="row">
                <a class="col btn btn-outline-dark text-uppercase" [routerLink]="['/login']">Sign in</a>
            </div>
        </ng-template>
    </div>
</div>
